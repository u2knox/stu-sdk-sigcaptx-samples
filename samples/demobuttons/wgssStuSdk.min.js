var WacomGSS=WacomGSS||{};function utf8_to_b64(e){return window.btoa(unescape(encodeURIComponent(e)))}function b64_to_utf8(e){return decodeURIComponent(escape(window.atob(e)))}WacomGSS.STUConstructor=function(){var e,t=65535,o=0,n=0,r={},i={};function c(e){return void 0!==e}function a(){return o++}function p(t){var o=this;c(t)||(t=9e3),this.onDCAtimeout=null,(e=new WebSocket("wss://localhost:"+t.toString()+"/ws")).onopen=function(){console.log("connected")},e.onmessage=d,e.onclose=function(){console.log("disconnected"),"function"==typeof o.onDCAtimeout&&o.onDCAtimeout()}}function d(e){if(void 0!==e.data&&""!=e.data){var t=JSON.parse(e.data);if(c(t.ticket)&&c(r[t.ticket]))c(t.success)&&!0==t.success&&c(t.data)?r[t.ticket].resolve(t.data):r[t.ticket].reject(Error(c(t.error)?t.error:"")),delete r[t.ticket];else if(c(t.stream)&&c(i[t.stream])&&c(t.data))i[t.stream].stream(t.data);else throw Error("websocket invalid message: "+e.data)}else console.log("Unexpected message type "+typeof e+" = "+JSON.stringify(e))}function s(o){for(var n=o.length,r=0;r<n;){var i=r+t<n?"0":"1",c=o.substr(r,t);e.send(i+c),r+=t}}return p.prototype.Reinitialize=function(){WacomGSS.STU=new WacomGSS.STUConstructor},p.prototype.isServiceReady=function(){return 1==e.readyState},p.prototype.isDCAReady=function(){var e=Q.defer();return WacomGSS.STU.isServiceReady()?(setTimeout(function(){e.promise.isPending()&&(WacomGSS.STU.isServiceReady()&&WacomGSS.STU.close(),e.resolve(!1))},1e3),WacomGSS.STU.getUsbDevices().then(function(t){e.promise.isPending()&&e.resolve(!0)}).fail(function(t){e.promise.isPending()&&e.resolve(!0)})):e.resolve(!1),e.promise},p.prototype.close=function(){e.close()},p.prototype.VendorId={VendorId_Wacom:1386},p.prototype.ProductId={ProductId_500:161,ProductId_300:162,ProductId_520A:163,ProductId_430:164,ProductId_530:165,ProductId_430V:166,ProductId_540:168,ProductId_541:169},p.prototype.ProductId_min=161,p.prototype.ProductId_max=175,p.prototype.send=function(e){var t=Q.defer();try{var o=a();e.ticket=o;var n=JSON.stringify(e);s(n),r[o]=t}catch(i){t.reject(i)}return t.promise},p.prototype.sendNoReturn=function(e){s(JSON.stringify(e))},p.prototype.setStream=function(e){var t=n++;return i[t]=e,t},p.prototype.removeStream=function(e){delete i[e]},p.prototype.getUsbDevices=function(){return WacomGSS.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"getUsbDevices"})},p.prototype.getTlsDevices=function(){return WacomGSS.STU.send({scope:"WacomGSS.STU.GetTlsDevices",function:"getTlsDevices"})},p.prototype.isSupportedUsbDevice=function(e,t){return WacomGSS.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"isSupportedUsbDevice",idVendor:e,idProduct:t})},p.prototype.getStringUsbDevice=function(e){function t(e){return("0000"+e.toString(16)).substr(-4)}return t(e.idVendor)+":"+t(e.idProduct)+":"+t(e.bcdDevice)},p.prototype.SerialPort={Type:{Unknown:0,Physical:1,Virtual:2,Remote:3}},p.prototype.getSerialPorts=function(){return WacomGSS.STU.send({scope:"WacomGSS.STU.GetSerialPorts",function:"getSerialPorts"})},p.prototype.UsbInterface=function(){var e="WacomGSS.STU.UsbInterface",t="";function o(){}return o.prototype.Constructor=function(){return WacomGSS.STU.send({scope:e,function:"Constructor"}).then(function(e){return t=e.id,e})},o.prototype.connect=function(o,n){return WacomGSS.STU.send({scope:e,id:t,function:"connect",usbDevice:o,exclusiveLock:n})},o.prototype.toJSON=function(){return{id:t,scope:e}},o.prototype.disconnect=function(){return WacomGSS.STU.send({scope:e,id:t,function:"disconnect"})},o.prototype.isConnected=function(){return WacomGSS.STU.send({scope:e,id:t,function:"isConnected"})},o.prototype.queueNotifyAll=function(){return WacomGSS.STU.send({scope:e,id:t,function:"queueNotifyAll"})},o.prototype.queueSetPredicateAll=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"queueSetPredicateAll",predicate:o})},o.prototype.get=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"get_",length:o})},o.prototype.set=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"set",base64Data:o})},o.prototype.supportsWrite=function(){return WacomGSS.STU.send({scope:e,id:t,function:"supportsWrite"})},o.prototype.write=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"write",base64Data:o})},o.prototype.getReportCountLengths=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportCountLengths"})},o.prototype.getProductId=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getProductId"})},o}(),p.prototype.Protocol=function(){var e="WacomGSS.STU.Protocol",t="",o={};function n(){}return n.prototype.PenDataOptionMode={PenDataOptionMode_None:0,PenDataOptionMode_TimeCount:1,PenDataOptionMode_SequenceNumber:2,PenDataOptionMode_TimeCountSequence:3},n.prototype.InkingMode={InkingMode_Off:0,InkingMode_On:1},n.prototype.ReportId={ReportId_PenData:1,ReportId_Status:3,ReportId_Reset:4,ReportId_HidInformation:6,ReportId_Information:8,ReportId_Capability:9,ReportId_Uid:10,ReportId_Uid2:11,ReportId_DefaultMode:12,ReportId_ReportRate:13,ReportId_RenderingMode:14,ReportId_Eserial:15,ReportId_PenDataEncrypted:16,ReportId_HostPublicKey:19,ReportId_DevicePublicKey:20,ReportId_StartCapture:21,ReportId_EndCapture:22,ReportId_DHprime:26,ReportId_DHbase:27,ReportId_ClearScreen:32,ReportId_InkingMode:33,ReportId_InkThreshold:34,ReportId_ClearScreenArea:35,ReportId_StartImageDataArea:36,ReportId_StartImageData:37,ReportId_ImageDataBlock:38,ReportId_EndImageData:39,ReportId_HandwritingThicknessColor:40,ReportId_BackgroundColor:41,ReportId_HandwritingDisplayArea:42,ReportId_BacklightBrightness:43,ReportId_ScreenContrast:44,ReportId_HandwritingThicknessColor24:45,ReportId_BackgroundColor24:46,ReportId_BootScreen:47,ReportId_PenDataOption:48,ReportId_PenDataEncryptedOption:49,ReportId_PenDataOptionMode:50,ReportId_PenDataTimeCountSequenceEncrypted:51,ReportId_PenDataTimeCountSequence:52,ReportId_EncryptionCommand:64,ReportId_EncryptionStatus:80,ReportId_GetReport:128,ReportId_SetResult:129,ReportId_PinPadData:144,ReportId_PinPadDataEncrypted:145,ReportId_PinOperationMode:146,ReportId_OperationMode:147,ReportId_RomStartImageData:148,ReportId_RomImageOccupancy:149,ReportId_RomImageHash:150,ReportId_RomImageDelete:151,ReportId_CurrentImageArea:152,ReportId_EventData:153,ReportId_EventDataEncrypted:154,ReportId_RomImageDisplay:155,ReportId_ReportSizeCollection:255,Decrypt:256,SigCaptX_Decrypt:256,SigCaptX_TabletDisconnected:257},n.prototype.DefaultMode={DefaultMode_HID:1,DefaultMode_Serial:2},n.prototype.StatusCode={StatusCode_Ready:0,StatusCode_Image:1,StatusCode_Capture:2,StatusCode_Calculation:3,StatusCode_Image_Boot:4,StatusCode_RomBusy:5,StatusCode_SystemReset:255},n.prototype.ErrorCode={ErrorCode_None:0,ErrorCode_WrongReportId:1,ErrorCode_WrongState:2,ErrorCode_CRC:3,ErrorCode_GraphicsWrongEncodingType:16,ErrorCode_GraphicsImageTooLong:17,ErrorCode_GraphicsZlibError:18,ErrorCode_GraphicsWrongParameters:21,ErrorCode_PadNotExist:32,ErrorCode_RomSizeOverflow:51,ErrorCode_RomInvalidParameter:52,ErrorCode_RomErrorCRC:53},n.prototype.Rectangle={upperLeftXpixel:0,upperLeftYpixel:0,lowerRightXpixel:0,lowerRightYpixel:0},n.prototype.InkThreshold={onPressureMark:0,offPressureMark:0},n.prototype.HandwritingThicknessColor={penColor:0,penThickness:0},n.prototype.HandwritingThicknessColor24={penColor:0,penThickness:0},n.prototype.EncryptionCommandNumber={EncryptionCommandNumber_SetEncryptionType:1,EncryptionCommandNumber_SetParameterBlock:2,EncryptionCommandNumber_GetStatusBlock:3,EncryptionCommandNumber_GetParameterBlock:4,EncryptionCommandNumber_GenerateSymmetricKey:5},n.prototype.EncodingMode={EncodingMode_1bit:0,EncodingMode_1bit_Zlib:1,EncodingMode_16bit:2,EncodingMode_24bit:4,EncodingMode_1bit_Bulk:16,EncodingMode_16bit_Bulk:18,EncodingMode_24bit_Bulk:20},n.prototype.EndImageDataFlag={EndImageDataFlag_Commit:0,EndImageDataFlag_Abandon:1},n.prototype.ResetFlag={ResetFlag_Software:0,ResetFlag_Hardware:1},n.prototype.EncodingFlag={EncodingFlag_Zlib:1,EncodingFlag_1bit:2,EncodingFlag_16bit:4,EncodingFlag_24bit:8},n.prototype.StatusCodeRSA={StatusCodeRSA_Ready:0,StatusCodeRSA_Calculating:250,StatusCodeRSA_Even:251,StatusCodeRSA_Long:252,StatusCodeRSA_Short:253,StatusCodeRSA_Invalid:254,StatusCodeRSA_NotReady:255},n.prototype.ErrorCodeRSA={ErrorCodeRSA_None:0,ErrorCodeRSA_BadParameter:1,ErrorCodeRSA_ParameterTooLong:2,ErrorCodeRSA_PublicKeyNotReady:3,ErrorCodeRSA_PublicExponentNotReady:4,ErrorCodeRSA_SpecifiedKeyInUse:5,ErrorCodeRSA_SpecifiedKeyNotInUse:6,ErrorCodeRSA_BadCommandCode:7,ErrorCodeRSA_CommandPending:8,ErrorCodeRSA_SpecifiedKeyExists:9,ErrorCodeRSA_SpecifiedKeyNotExist:10,ErrorCodeRSA_NotInitialized:11},n.prototype.SymmetricKeyType={SymmetricKeyType_AES128:0,SymmetricKeyType_AES192:1,SymmetricKeyType_AES256:2},n.prototype.AsymmetricKeyType={AsymmetricKeyType_RSA1024:0,AsymmetricKeyType_RSA1536:1,AsymmetricKeyType_RSA2048:2},n.prototype.AsymmetricPaddingType={AsymmetricPaddingType_None:0,AsymmetricPaddingType_PKCS1:1,AsymmetricPaddingType_OAEP:2},n.prototype.AsymmetricPaddingType={EncryptionCommandParameterBlockIndex_RSAe:0,EncryptionCommandParameterBlockIndex_RSAn:1,EncryptionCommandParameterBlockIndex_RSAc:2,EncryptionCommandParameterBlockIndex_RSAm:3},n.prototype.RomImageDeleteMode={RomImageDeleteMode_All:0,RomImageDeleteMode_PinPad_All:1,RomImageDeleteMode_SlideShow_All:2,RomImageDeleteMode_KeyPad_All:3,RomImageDeleteMode_Signature_All:4,RomImageDeleteMode_MessageBox_All:5,RomImageDeleteMode_PinPad_Number:6,RomImageDeleteMode_SlideShow_Number:7,RomImageDeleteMode_KeyPad_Number:8,RomImageDeleteMode_Signature_Number:9,RomImageDeleteMode_MessageBox_Number:10},n.prototype.OperationModeType={OperationModeType_Normal:0,OperationModeType_PinPad:1,OperationModeType_SlideShow:2,OperationModeType_KeyPad:3,OperationModeType_Signature:4,OperationModeType_MessageBox:5},n.prototype.ImageDataBlock_maxLengthHID=253,n.prototype.ImageDataBlock_maxLengthSerial=2557,n.prototype.ImageDataBlock_maxLength540=2557,n.prototype.toJSON=function(){return{id:t,scope:e}},n.prototype.Constructor=function(n){return o=n,WacomGSS.STU.send({scope:e,function:"Constructor",intf:o.toJSON()}).then(function(e){return t=e.id,e})},n.prototype.getInterface=function(){return o},n.prototype.getInformation=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInformation"})},n.prototype.getPenDataOptionMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getPenDataOptionMode"})},n.prototype.setPenDataOptionMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setPenDataOptionMode",penDataOptionMode:o})},n.prototype.OperationMode_Normal=function e(){this.operationMode=0,this.data=[]},n.prototype.OperationMode_PinPad=function e(t,o,n,r,i,c,a){this.operationMode=1,this.data=[],this.data[0]=t,this.data[1]=Number(o),this.data[2]=n,this.data[3]=r,this.data[4]=Number(i),this.data[5]=c,this.data[6]=a},n.prototype.OperationMode_SlideShow=function e(t,o,n,r){this.operationMode=2,this.data=[],this.data[0]=t,this.data[1]=o,this.data[2]=(15&n[0])<<4|15&n[1],this.data[3]=(15&n[2])<<4|15&n[3],this.data[4]=(15&n[4])<<4|15&n[5],this.data[5]=(15&n[6])<<4|15&n[7],this.data[6]=(15&n[8])<<4|15&n[9],this.data[7]=r>>24&255,this.data[8]=r>>16&255,this.data[9]=r>>8&255,this.data[10]=255&r},n.prototype.OperationMode_KeyPad=function e(t,o){this.operationMode=3,this.data=[],this.data[0]=t,this.data[1]=o},n.prototype.OperationMode_Signature=function e(t,o,n,r){this.operationMode=4,this.data=[],this.data[0]=t,this.data[1]=o[0],this.data[2]=o[1],this.data[3]=o[2],this.data[4]=n},n.prototype.setOperationMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setOperationMode",operationMode:o})},n.prototype.getOperationMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getOperationMode"})},n.prototype.RomStartImageData_PinPad=function e(t,o,n,r,i){this.encodingMode=t,this.operationMode=1,this.imageType=o,this.imageNumber=n,this.data=[r,i,0]},n.prototype.RomStartImageData_SlideShow=function e(t,o,n){this.encodingMode=t,this.operationMode=2,this.imageType=o,this.imageNumber=n,this.data=[0,0,0]},n.prototype.RomStartImageData_KeyPad=function e(t,o,n,r,i){this.encodingMode=t,this.operationMode=3,this.imageType=o,this.imageNumber=n,this.data=[],this.data[0]=r,this.data[1]=i.length>8&&i[8]?1:0,this.data[2]=(i.length>7&&i[7]?128:0)|(i.length>6&&i[6]?64:0)|(i.length>5&&i[5]?32:0)|(i.length>4&&i[4]?16:0)|(i.length>3&&i[3]?8:0)|(i.length>2&&i[2]?4:0)|(i.length>1&&i[1]?2:0)|(i.length>0&&i[0]?1:0)},n.prototype.RomStartImageData_Signature=function e(t,o,n,r){this.encodingMode=t,this.operationMode=4,this.imageType=o,this.imageNumber=n,this.data=[],this.data[0]=(r[2]?4:0)|(r[1]?2:0)|(r[0]?1:0)},n.prototype.RomStartImageData_MessageBox=function e(t,o){this.encodingMode=t,this.operationMode=5,this.imageType=!1,this.imageNumber=o,this.data=[0,0,0]},n.prototype.setRomStartImageData=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setRomStartImageData",romStartImage:o})},n.prototype.setRomImageHash=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageHash",operationModeType:o,imageType:n,imageNumber:r})},n.prototype.getRomImageHash=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getRomImageHash"})},n.prototype.setRomImageDelete=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageDelete",romImageDeleteMode:o,imageType:n,imageNumber:r})},n.prototype.getCurrentImageArea=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getCurrentImageArea"})},n.prototype.setRomImageDisplay=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageDisplay",operationModeType:o,imageType:n,imageNumber:r})},n.prototype.getEserial=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getEserial"})},n.prototype.setClearScreen=function(){return WacomGSS.STU.send({scope:e,id:t,function:"setClearScreen"})},n.prototype.setInkingMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setInkingMode",inkingMode:o})},n.prototype.rebind=function(n){var r=n;return WacomGSS.STU.send({scope:e,id:t,function:"rebind",intf:n.toJSON()}).then(function(e){null===e&&(o=r)})},n.prototype.getStatus=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getStatus"})},n.prototype.setReset=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setReset",flag:o})},n.prototype.getHidInformation=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHidInformation"})},n.prototype.getCapability=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getCapability"})},n.prototype.getUid=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getUid"})},n.prototype.setUid=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setUid",uid:o})},n.prototype.getUid2=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getUid2"})},n.prototype.setDefaultMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDefaultMode",defaultMode:o})},n.prototype.getDefaultMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDefaultMode"})},n.prototype.getHostPublicKey=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHostPublicKey"})},n.prototype.setHostPublicKey=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHostPublicKey",hostPublicKey:o})},n.prototype.getDevicePublicKey=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDevicePublicKey"})},n.prototype.setStartCapture=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setStartCapture",sessionId:o})},n.prototype.setEndCapture=function(){return WacomGSS.STU.send({scope:e,id:t,function:"setEndCapture"})},n.prototype.getDHprime=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDHprime"})},n.prototype.setDHprime=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDHprime",prime:o})},n.prototype.getDHbase=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDHbase"})},n.prototype.setDHbase=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDHbase",base:base})},n.prototype.setClearScreenArea=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setClearScreenArea",area:o})},n.prototype.getInkingMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInkingMode"})},n.prototype.getInkThreshold=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInkThreshold"})},n.prototype.setInkThreshold=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setInkThreshold",inkThreshold:o})},n.prototype.setStartImageData=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setStartImageData",encodingMode:o})},n.prototype.setStartImageDataArea=function(o,n){return WacomGSS.STU.send({scope:e,id:t,function:"setStartImageDataArea",encodingMode:o,area:n})},n.prototype.setImageDataBlock=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setEndImageData",imageDataBlock:o})},n.prototype.setEndImageData=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setEndImageData",endImageDataFlag:endImageDataFlag})},n.prototype.getHandwritingThicknessColor=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingThicknessColor"})},n.prototype.setHandwritingThicknessColor=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingThicknessColor",handwritingThicknessColor:o})},n.prototype.getHandwritingThicknessColor24=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingThicknessColor24"})},n.prototype.setHandwritingThicknessColor24=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:o})},n.prototype.getBackgroundColor=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBackgroundColor"})},n.prototype.setBackgroundColor=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBackgroundColor",backgroundColor:o})},n.prototype.getBackgroundColor24=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBackgroundColor24"})},n.prototype.setBackgroundColor24=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBackgroundColor24",backgroundColor24:o})},n.prototype.BootScreenFlag={Disable:0,Enable:1},n.prototype.setBootScreen=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBootScreen",bootScreenFlag:o})},n.prototype.getBootScreen=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBootScreen"})},n.prototype.getHandwritingDisplayArea=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingDisplayArea"})},n.prototype.setHandwritingDisplayArea=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingDisplayArea",handwritingDisplayArea:o})},n.prototype.getBacklightBrightness=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBacklightBrightness"})},n.prototype.setBacklightBrightness=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBacklightBrightness",backlightBrightness:o})},n.prototype.getScreenContrast=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getScreenContrast"})},n.prototype.setScreenContrast=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setScreenContrast",screenContrast:o})},n.prototype.getEncryptionStatus=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getEncryptionStatus"})},n.prototype.EncryptionCommand=function(){var e="WacomGSS.STU.Protocol";function t(e){this.encryptionCommandNumber=e.encryptionCommandNumber,this.parameter=e.parameter,this.lengthOrIndex=e.lengthOrIndex,this.data=e.data}function o(){this.encryptionCommandNumber=0,this.parameter=0,this.lengthOrIndex=0,this.data=[]}return o.prototype.initializeSetEncryptionType=function(o,n,r){return WacomGSS.STU.send({scope:e,function:"EncryptionCommand_initializeSetEncryptionType",symmetricKeyType:o,asymmetricPaddingType:n,asymmetricKeyType:r}).then(function(e){return t.call(this,e),this})},o.prototype.initializeSetParameterBlock=function(o,n){return WacomGSS.STU.send({scope:e,function:"EncryptionCommand_initializeSetParameterBlock",index:o,data:n}).then(function(e){return t.call(this,e),this})},o.prototype.initializeGenerateSymmetricKey=function(){return WacomGSS.STU.send({scope:e,function:"EncryptionCommand_initializeGenerateSymmetricKey"}).then(function(e){return t.call(this,e),this})},o.prototype.initializeGetParameterBlock=function(o,n){return WacomGSS.STU.send({scope:e,function:"EncryptionCommand_initializeGetParameterBlock"}).then(function(e){return t.call(this,e),this})},o}(),n.prototype.getEncryptionCommand=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"getEncryptionCommand",encryptionCommandNumber:o})},n.prototype.getReportSizeCollection=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportSizeCollection"})},n.prototype.setReportRate=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setReportRate",reportRate:o})},n.prototype.getReportRate=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportRate"})},n.prototype.RenderingMode={RenderingMode_Legacy:0,RenderingMode_WILL:1},n.prototype.setRenderingMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setRenderingMode",renderingMode:o})},n.prototype.getRenderingMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getRenderingMode"})},n}(),p.prototype.ProtocolHelper={ReportHandler:function(){var e="WacomGSS.STU.ProtocolHelper.ReportHandler",t=null,o=null;function n(){this.onReportPenData=function(e){},this.onReportPenDataOption=function(e){},this.onReportPenDataTimeCountSequence=function(e){},this.onReportPenDataEncrypted=function(e){},this.onReportPenDataEncryptedOption=function(e){},this.onReportPenDataTimeCountSequenceEncrypted=function(e){},this.onReportDevicePublicKey=function(e){},this.onReportEncryptionStatus=function(e){},this.onReportEventDataPinPad=function(e){},this.onReportEventDataKeyPad=function(e){},this.onReportEventDataSignature=function(e){},this.onReportEventDataPinPadEncrypted=function(e){},this.onReportEventDataKeyPadEncrypted=function(e){},this.onReportEventDataSignatureEncrypted=function(e){},this.decrypt=function(e){},this.tabletDisconnected=function(e){},this.stream=function(e){var t=new WacomGSS.STU.Protocol;switch(e.reportId){case t.ReportId.ReportId_PenData:this.onReportPenData(e);break;case t.ReportId.ReportId_PenDataOption:this.onReportPenDataOption(e);break;case t.ReportId.ReportId_PenDataTimeCountSequence:this.onReportPenDataTimeCountSequence(e);break;case t.ReportId.ReportId_PenDataEncrypted:this.onReportPenDataEncrypted(e);break;case t.ReportId.ReportId_PenDataEncryptedOption:this.onReportPenDataEncryptedOption(e);break;case t.ReportId.ReportId_PenDataTimeCountSequenceEncrypted:this.onReportPenDataTimeCountSequenceEncrypted(e);break;case t.ReportId.ReportId_DevicePublicKey:this.onReportDevicePublicKey(e);break;case t.ReportId.ReportId_EncryptionStatus:this.onReportEncryptionStatus(e);break;case t.ReportId.ReportId_EventData:this.onEventData(t,e);break;case t.ReportId.ReportId_EventDataEncrypted:this.onEventDataEncrypted(t,e);break;case t.ReportId.SigCaptX_Decrypt:this.decrypt(e);break;case t.ReportId.SigCaptX_TabletDisconnected:this.tabletDisconnected(e)}}}return n.prototype.startReporting=function(n,r){return t=WacomGSS.STU.setStream(this),WacomGSS.STU.send({interfaceQueueHolder:n.toJSON(),scope:e,function:"startReporting",streamId:t,tabletDecrypt:!0===r}).then(function(e){return o=e.id,e})},n.prototype.stopReporting=function(){if(null===t)throw"Error: trying to stop reporting before starting";return WacomGSS.STU.send({id:o,scope:e,function:"stopReporting"}).then(function(e){return WacomGSS.STU.removeStream(t),e})},n.prototype.onEventData=function(e,t){switch(t.operationModeType){case e.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPad(t);break;case e.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPad(t);break;case e.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignature(t)}},n.prototype.onEventDataEncrypted=function(e,t){switch(t.operationModeType){case e.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPadEncrypted(t);break;case e.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPadEncrypted(t);break;case e.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignatureEncrypted(t)}},n}(),InkState_isOff:1,InkState_isOn:2,InkState_isInk:4,InkState_isFirst:8,InkState_isLast:16,InkState:{InkState_Up:1,InkState_Down:2,InkState_Inking:6,InkState_First:14,InkState_Last:17},OpDirection:{OpDirection_Get:256,OpDirection_Set:512},statusCanSend:function(e,t,o){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"statusCanSend",statusCode:e,reportId:t,opDirection:o})},waitForStatusToSend:function(e,t,o,n,r){var i=Q.defer();function c(){e.getStatus().then(function(e){return WacomGSS.STU.ProtocolHelper.statusCanSend(e.statusCode,t,o)}).then(function(e){if(!0===e){i.resolve();return}if(n<=0){i.reject(Error("timeout error"));return}n--,setTimeout(c,r)})}return setTimeout(c,0),i.promise},waitForStatus:function(e,t,o,n){var r=Q.defer();function i(){e.getStatus().then(function(e){if(e.statusCode===t){r.resolve();return}if(o<=0){r.reject(Error("timeout error"));return}o--,setTimeout(i,n)})}return setTimeout(i,0),r.promise},supportsEncryption:function(e){var t=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Get;return WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_DHprime,t,25,50).then(function(t){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption",protocol:e})})},supportsEncryption_DHprime:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption_DHprime",dhPrime:e})},setHostPublicKeyAndPollForDevicePublicKey:function(e,t,o,n){return e.setHostPublicKey(t).then(function(t){var r=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Get;return WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_DevicePublicKey,r,o,n)}).then(function(t){return e.getDevicePublicKey()}).then(function(e){if(e.length!==t.length)throw Error("Unexpected key size");return e})},writeImage:function(e,t,o,n,r){n=void 0===n?25:n,r=void 0===r?25:r;var i=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Set;return WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_StartImageData,i,n,r).then(function(o){return e.setStartImageData(t)}).then(function(i){var c=e.ImageDataBlock_maxLengthHID;return WacomGSS.STU.ProtocolHelper.writeImageCommon(e,t,c,o,n,r)})},writeImageCommon:function(e,t,o,n,r,i){if(o>e.ImageDataBlock_maxLengthSerial)throw Error("Invalid maxImageBlockSize");var c=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Set;return WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_ImageDataBlock,c,r,i).then(function(r){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeImageCommon",protocol:e.toJSON(),intf:e.getInterface().toJSON(),encodingMode:t,imageData:n,maxImageBlockSize:o})})},flattenMonochrome:function(e,t,o,n){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenMonochrome",b64Data:e,screenWidth:t,screenHeight:o,dataStore:!0===n}).then(function(e){if("string"==typeof e)return e;var t=new WacomGSS.STU.DataStore;return t.setId(e.id),t})},flatten:function(e,t,o,n,r){var i=new WacomGSS.STU.Protocol;switch(e){case i.EncodingMode.EncodingMode_24bit:case i.EncodingMode.EncodingMode_24bit_Bulk:return WacomGSS.STU.ProtocolHelper.flattenColor24(t,o,n,r);case i.EncodingMode.EncodingMode_16bit:case i.EncodingMode.EncodingMode_16bit_Bulk:return WacomGSS.STU.ProtocolHelper.flattenColor16(t,o,n,r);case i.EncodingMode.EncodingMode_1bit:case i.EncodingMode.EncodingMode_1bit_Bulk:return WacomGSS.STU.ProtocolHelper.flattenMonochrome(t,o,n,r)}},resizeAndFlatten:function(e,t,o,n,r,i,c,a,p,d,s,u){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"resizeAndFlatten",b64Data:e,offsetX:t,offsetY:o,bitmapWidth:n,bitmapHeight:r,screenWidth:i,screenHeight:c,encodingMode:a,scale:p,backgroundColor:d,clip:s,dataStore:!0===u}).then(function(e){if("string"==typeof e)return e;var t=new WacomGSS.STU.DataStore;return t.setId(e.id),t})},encodingFlagSupportsColor:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"encodingFlagSupportsColor",screenWidth:e})},flattenColor16:function(e,t,o,n){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor16",b64Data:e,screenWidth:t,screenHeight:o,dataStore:!0===n}).then(function(e){if("string"==typeof e)return e;var t=new WacomGSS.STU.DataStore;return t.setId(e.id),t})},flattenColor24:function(e,t,o,n){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor24",b64Data:e,screenWidth:t,screenHeight:o,dataStore:!0===n}).then(function(e){if("string"==typeof e)return e;var t=new WacomGSS.STU.DataStore;return t.setId(e.id),t})},generateSymmetricKeyAndWaitForEncryptionStatus:function(e,t,o,n){var i=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Set,c=Q.defer(),p=a();return r[p]=c,WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_EncryptionCommand,i,t,o).then(function(t){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"generateSymmetricKeyAndWaitForEncryptionStatus",protocol:e.toJSON(),intf:e.getInterface().toJSON(),timeout:n,sleepBetweenRetries:o,ticket2:p}).then(function(e){return c.promise})})},simulateEncodingFlag:function(e,t){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"simulateEncodingFlag",idProduct:e,encodingFlag:"undefined"==typeof obj?0:t})},writeImageArea:function(e,t,o,n,r,i){r=void 0===r?25:r,i=void 0===i?25:i;var c=WacomGSS.STU.ProtocolHelper.OpDirection.OpDirection_Set;return WacomGSS.STU.ProtocolHelper.waitForStatusToSend(e,WacomGSS.STU.Protocol.ReportId.ReportId_StartImageDataArea,c,r,i).then(function(n){return e.setStartImageDataArea(t,o)}).then(function(o){var c=e.ImageDataBlock_maxLengthHID;return WacomGSS.STU.ProtocolHelper.writeImageCommon(e,t,c,n,r,i)})},writeRomImage:function(e,t,o,n,r,i){return WacomGSS.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeRomImage",protocol:e,romStartImageData:t,maxImageBlockSize:o,imageData:n,retries:r,sleepBetweenRetries:i})}},p.prototype.Tablet=function(){var e="WacomGSS.STU.Tablet",t=null;function o(){}return o.prototype.toJSON=function(){return{id:t,scope:e}},o.prototype.Constructor=function(o,n,r){return WacomGSS.STU.send({scope:e,function:"Constructor",hasIntf:void 0!==o,intf:void 0===o?null:o.toJSON(),encryptionHandler:null==n?null:n.toJSON(),encryptionHandler2:null==r?null:r.toJSON()}).then(function(e){return t=e.id,e})},o.prototype.attach=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"attach",intf:void 0===o?null:o.toJSON()})},o.prototype.detach=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"detach"}).then(function(e){var t;return c(e.scope)&&c(e.id)&&("WacomGSS.STU.UsbInterface"===e.scope?(t=new p.UsbInterface).id=e.id:"WacomGSS.STU.SerialInterface"===e.scope&&((t=new p.SerialInterface).id=e.id)),t})},o.prototype.getInformation=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInformation"})},o.prototype.setClearScreen=function(){return WacomGSS.STU.send({scope:e,id:t,function:"setClearScreen"})},o.prototype.isSupported=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"isSupported",reportId:o})},o.prototype.getProductId=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"getProductId"})},o.prototype.setPenDataOptionMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setPenDataOptionMode",penDataOptionMode:o})},o.prototype.getDHprime=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDHprime"})},o.prototype.startCapture=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"startCapture",sessionId:o})},o.prototype.setInkingMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setInkingMode",inkingMode:o})},o.prototype.queueSetPredicateAll=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"queueSetPredicateAll",predicate:o})},o.prototype.endCapture=function(){return WacomGSS.STU.send({scope:e,id:t,function:"endCapture"})},o.prototype.disconnect=function(){return WacomGSS.STU.send({scope:e,id:t,function:"disconnect"})},o.prototype.empty=function(){return WacomGSS.STU.send({scope:e,id:t,function:"empty"})},o.prototype.isConnected=function(){return WacomGSS.STU.send({scope:e,id:t,function:"isConnected"})},o.prototype.supportsWrite=function(){return WacomGSS.STU.send({scope:e,id:t,function:"supportsWrite"})},o.prototype.getReportCountLengths=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportCountLengths"})},o.prototype.getStatus=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getStatus"})},o.prototype.reset=function(){return WacomGSS.STU.send({scope:e,id:t,function:"reset"})},o.prototype.getHidInformation=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHidInformation"})},o.prototype.getCapability=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getCapability"})},o.prototype.getUid=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getUid"})},o.prototype.setUid=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setUid",uid:o})},o.prototype.getUid2=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getUid2"})},o.prototype.setDefaultMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDefaultMode",defaultMode:o})},o.prototype.getDefaultMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDefaultMode"})},o.prototype.getHostPublicKey=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHostPublicKey"})},o.prototype.getDevicePublicKey=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDevicePublicKey"})},o.prototype.setDHprime=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDHprime",prime:o})},o.prototype.getDHbase=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getDHbase"})},o.prototype.setDHbase=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setDHbase",base:base})},o.prototype.setClearScreenArea=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setClearScreenArea",area:o})},o.prototype.getInkingMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInkingMode"})},o.prototype.getInkThreshold=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getInkThreshold"})},o.prototype.setInkThreshold=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setInkThreshold",inkThreshold:o})},o.prototype.writeImage=function(o,n){var r=null;return r="string"==typeof n?n:n.toJSON(),WacomGSS.STU.send({scope:e,id:t,function:"writeImage",encodingMode:o,b64Data:r})},o.prototype.writeImageArea=function(o,n,r){var i=null;return i="string"==typeof r?r:r.toJSON(),WacomGSS.STU.send({scope:e,id:t,function:"writeImageArea",encodingMode:o,area:n,b64Data:i})},o.prototype.endImageData=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"endImageData"})},o.prototype.getHandwritingThicknessColor=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingThicknessColor"})},o.prototype.setHandwritingThicknessColor=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingThicknessColor",handwritingThicknessColor:o})},o.prototype.getHandwritingThicknessColor24=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingThicknessColor24"})},o.prototype.setHandwritingThicknessColor24=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:o})},o.prototype.getBackgroundColor=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBackgroundColor"})},o.prototype.setBackgroundColor=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBackgroundColor",backgroundColor:o})},o.prototype.getBackgroundColor24=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBackgroundColor24"})},o.prototype.setBackgroundColor24=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBackgroundColor24",backgroundColor24:o})},o.prototype.getHandwritingDisplayArea=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getHandwritingDisplayArea"})},o.prototype.setHandwritingDisplayArea=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setHandwritingDisplayArea",handwritingDisplayArea:o})},o.prototype.getBacklightBrightness=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getBacklightBrightness"})},o.prototype.setBacklightBrightness=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setBacklightBrightness",backlightBrightness:o})},o.prototype.getScreenContrast=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getScreenContrast"})},o.prototype.setScreenContrast=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setScreenContrast",screenContrast:o})},o.prototype.getPenDataOptionMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getPenDataOptionMode"})},o.prototype.getEncryptionStatus=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getEncryptionStatus"})},o.prototype.getEncryptionCommand=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"getEncryptionCommand",encryptionCommandNumber:o})},o.prototype.decrypt=function(o){return WacomGSS.STU.send({scope:e,id:t,decrypt:"decrypt",data:o})},o.prototype.setReportRate=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setReportRate",reportRate:o})},o.prototype.getReportRate=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportRate"})},o.prototype.setRenderingMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setRenderingMode",renderingMode:o})},o.prototype.getRenderingMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getRenderingMode"})},o.prototype.setOperationMode=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setOperationMode",operationMode:o})},o.prototype.getOperationMode=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getOperationMode"})},o.prototype.writeRomImage=function(o,n){return WacomGSS.STU.send({scope:e,id:t,function:"writeRomImage",romStartImageData:o,imageData:n})},o.prototype.setRomImageHash=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageHash",operationModeType:o,imageType:n,imageNumber:r})},o.prototype.getRomImageHash=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getRomImageHash"})},o.prototype.setRomImageDelete=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageDelete",romImageDeleteMode:o,imageType:n,imageNumber:r})},o.prototype.getCurrentImageArea=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getCurrentImageArea"})},o.prototype.setRomImageDisplay=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"setRomImageDisplay",operationModeType:o,imageType:n,imageNumber:r})},o.prototype.getEserial=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getEserial"})},o}(),p.prototype.SerialInterface=function(){var e="WacomGSS.STU.SerialInterface",t="";function o(){}return o.prototype.Constructor=function(){return WacomGSS.STU.send({scope:e,function:"Constructor"}).then(function(e){return t=e.id,e})},o.prototype.BaudRate_STU500=115200,o.prototype.BaudRate_STU430_530_prerelease=460800,o.prototype.BaudRate_STU430_530=3e6,o.prototype.connect=function(o,n,r){return WacomGSS.STU.send({scope:e,id:t,function:"connect",fileName:o,baudRate:n,useCrc:r})},o.prototype.toJSON=function(){return{id:t,scope:e}},o.prototype.disconnect=function(){return WacomGSS.STU.send({scope:e,id:t,function:"disconnect"})},o.prototype.isConnected=function(){return WacomGSS.STU.send({scope:e,id:t,function:"isConnected"})},o.prototype.queueNotifyAll=function(){return WacomGSS.STU.send({scope:e,id:t,function:"queueNotifyAll"})},o.prototype.queueSetPredicateAll=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"queueSetPredicateAll",predicate:o})},o.prototype.get=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"get_",length:o})},o.prototype.set=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"set",base64Data:o})},o.prototype.supportsWrite=function(){return WacomGSS.STU.send({scope:e,id:t,function:"supportsWrite"})},o.prototype.write=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"write",base64Data:o})},o.prototype.getReportCountLengths=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportCountLengths"})},o.prototype.getProductId=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getProductId"})},o}(),p.prototype.TlsInterface=function(){var e="WacomGSS.STU.TlsInterface",t="";function o(){}return o.prototype.Constructor=function(){return WacomGSS.STU.send({scope:e,function:"Constructor"}).then(function(e){return t=e.id,e})},o.prototype.ConnectOption={ConnectOption_OOB:1,ConnectOption_SSL:2},o.prototype.connect=function(o,n){return WacomGSS.STU.send({scope:e,id:t,function:"connect",fileName:o,connectOption:n})},o.prototype.toJSON=function(){return{id:t,scope:e}},o.prototype.disconnect=function(){return WacomGSS.STU.send({scope:e,id:t,function:"disconnect"})},o.prototype.isConnected=function(){return WacomGSS.STU.send({scope:e,id:t,function:"isConnected"})},o.prototype.get=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"get_",length:o})},o.prototype.set=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"set",base64Data:o})},o.prototype.supportsWrite=function(){return WacomGSS.STU.send({scope:e,id:t,function:"supportsWrite"})},o.prototype.write=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"write",base64Data:o})},o.prototype.getReportCountLengths=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getReportCountLengths"})},o.prototype.getProductId=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getProductId"})},o}(),p.prototype.DataStore=function(){var e="WacomGSS.STU.DataStore",t=null;function o(){}return o.prototype.setId=function(e){t=e},o.prototype.toJSON=function(){return{id:t,scope:e}},o.prototype.Constructor=function(t){return WacomGSS.STU.send({scope:e,function:"Constructor",b64Data:t})},o.prototype.getData=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getData"})},o.prototype.getRemove=function(){return WacomGSS.STU.send({scope:e,id:t,function:"getRemove"}).then(function(e){return t=null,e})},o.prototype.remove=function(){return WacomGSS.STU.send({scope:e,id:t,function:"remove"}).then(function(e){return t=null,e})},o.prototype.setData=function(o){return WacomGSS.STU.send({scope:e,id:t,function:"setData",b64Data:o})},o}(),p.prototype.SerialProtocol={getHeaderLength:function(){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"getHeaderLength"})},isStartReport:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"isStartReport",byte:e})},decodeHasCrc:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeHasCrc",header1:e})},decodeEncodedDataLength:function(e,t){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeEncodedDataLength",header1:e,header2:t})},calcEncodedDataLength:function(e,t){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"calcEncodedDataLength",useCrc:e,length:t})},encodeHeader:function(e,t,o){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeHeader",encodedData:e,useCrc:t,encodedDataLength:o})},encodeReport:function(e,t){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeReport",report:e,useCrc:t})},decodeData:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeData",data:e})},checkCrcAndRemove:function(e){return WacomGSS.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"checkCrcAndRemove",container:e})}},p.prototype.EncryptionHandler=function(){var e="WacomGSS.STU.EncryptionHandler",t=null,o=null,n=null,r={};function i(e){n=e,this.stream=function(e){try{r[e.function](e)}catch(t){throw Error("EncryptionHandler."+e.function+" : "+t+"message was:"+JSON.stringify(e))}}}return i.prototype.Constructor=function(){return t=WacomGSS.STU.setStream(this),WacomGSS.STU.send({scope:e,function:"Constructor",streamId:t}).then(function(e){return o=e.id,e})},i.prototype.toJSON=function(){return{id:o,scope:e}},r.reset=function(t){n.reset(),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.clearKeys=function(t){n.clearKeys(),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.requireDH=function(t){var o=n.requireDH();WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},r.setDH=function(t){n.setDH(t.data.dhPrime,t.data.dhBase),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.generateHostPublicKey=function(t){var o=n.generateHostPublicKey();WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},r.computeSharedKey=function(t){n.computeSharedKey(t.data),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.decrypt=function(t){var o=n.decrypt(t.data);WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},i}(),p.prototype.EncryptionHandler2=function(){var e="WacomGSS.STU.EncryptionHandler2",t=null,o=null,n=null,r={};function i(e){n=e,this.stream=function(e){try{r[e.function](e)}catch(t){throw Error("EncryptionHandler2."+e.function+" : "+t+"message was:"+JSON.stringify(e))}}}return i.prototype.Constructor=function(){return t=WacomGSS.STU.setStream(this),WacomGSS.STU.send({scope:e,function:"Constructor",streamId:t}).then(function(e){return o=e.id,e})},i.prototype.toJSON=function(){return{id:o,scope:e}},r.reset=function(t){n.reset(),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.clearKeys=function(t){n.clearKeys(),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.getParameters=function(t){var o=n.getParameters(t.data.symmetricKeyType,t.data.asymmetricPaddingType,t.data.asymmetricKeyType),r=o[0],i=o[1],c=o[2];WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:{symmetricKeyType:r,asymmetricPaddingType:i,asymmetricKeyType:c}})},r.getPublicExponent=function(t){var o=n.getPublicExponent();WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},r.generatePublicKey=function(t){var o=n.generatePublicKey();WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},r.computeSessionKey=function(t){n.computeSessionKey(t.data),WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:null})},r.decrypt=function(t){var o=n.decrypt(t.data);WacomGSS.STU.sendNoReturn({scope:e,function:"set_value",promiseId:t.promiseId,data:o})},i}(),p}(),WacomGSS.STU=new WacomGSS.STUConstructor;